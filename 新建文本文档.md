## 后续开发计划

- 增加swagger
- 增加java爬虫技术 获取归属地





## 解决 has been blocked by CORS policy问题



就是浏览器 **`同源策略`** 问题，或者叫 **`跨域问题`** 。
 常见于用Chrome调试脚本的时候，需要加载的脚本和`location`不同源。




静态HTML文件能够发送 POST请求

方法一： 本地安装Tomcat,apache，将文件部署至服务器

方法二：创建一个用于调试的快捷方式，添加 **`启动参数`**

1. 找到浏览器主程序所在位置→右键→发送到→桌面快捷方式
2. 找到桌面快捷方式→右键→属性→快捷方式选项卡→目标
    在后面追加 参数



```bash
--user-data-dir="D:\ChromeDebug" --test-type --disable-web-security 
```

1. 确认保存
2. 前面这3步，具体参考 [这个百度经验](https://links.jianshu.com/go?to=https%3A%2F%2Fjingyan.baidu.com%2Farticle%2F148a1921c9dbf24d71c3b11f.html)
3. 点击快捷方式打开浏览器，然后再安装 `GoRes` 扩展，添加规则。再打开原来链接。发现可以成功替换和运行了。
4. 然后，继续你的折腾就好啦 (〃'▽'〃)



## API接口

```js
<script type="text/javascript">
    let data = {
        hostname: document.location.host,
        timestamp: new Date().getTime(),
    };
    let url = "https://open.treenull.cn/cloudopen/detailedRecord";
        fetch(url, {
            method: 'POST',
            mode: 'cors',
            body: JSON.stringify(data),
            headers: new Headers({
              'Content-Type': 'application/json'
            })
          }).then(res => res.json())
          .catch(function (err){
              console.error(err)
          });
</script>
```

```js
  <script type="text/javascript">
      var url = "https://open.treenull,cn/cloudopen/record"+"?hostname="+document.location.host+"&timestamp="+new Date().getTime();
      fetch(url);
  </script>
```

```js
function dataRecord(data){
    const url = 'https://open.treenull.cn/cloudopen/yiyan/dataRecord';
        fetch(url, {
            method: 'POST',
            mode: 'cors',
            body: JSON.stringify(data),
            headers: new Headers({
              'Content-Type': 'application/json'
            })
          }).then(res => res.json())
          .catch(function (err){
              console.error(err)
          });
}
```

```
https://open.treenull.cn/cloudopen/yiyan/list
```

```
https://open.treenull.cn/cloudopen/yiyan/checkHealth
```

